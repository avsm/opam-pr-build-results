FROM ocaml/opam:debian-stable_ocaml-4.02.3
RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" && \
  sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/samoht/opam-repository.git master && opam update -u" && \
  sudo -u opam sh -c "opam depext -u mirage mirage-unix mirage-xen" && \
  sudo -u opam sh -c "opam install -y -j 2 -v mirage mirage-unix mirage-xen"