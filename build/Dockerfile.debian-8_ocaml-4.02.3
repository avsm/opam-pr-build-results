FROM ocaml/opam:debian-8_ocaml-4.02.3
RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" && \
  sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/djs55/opam-repository.git shared-memory-ring.1.3.0 && opam update -u" && \
  sudo -u opam sh -c "opam depext -u shared-memory-ring" && \
  sudo -u opam sh -c "opam install -y -j 2 -v shared-memory-ring"