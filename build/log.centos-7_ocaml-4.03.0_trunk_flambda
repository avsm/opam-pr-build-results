Running this Dockerfile:
FROM ocaml/opam:centos-7_ocaml-4.03.0_trunk_flambda
RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" && \
  sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/UnixJunkie/opam-repository.git cairo-use-conf-autoconf && opam update -u" && \
  sudo -u opam sh -c "opam depext -u planets" && \
  sudo -u opam sh -c "opam install -y -j 2 -v planets"Sending build context to Docker daemon 78.34 kB
Step 1 : FROM ocaml/opam:centos-7_ocaml-4.03.0_trunk_flambda
centos-7_ocaml-4.03.0_trunk_flambda: Pulling from ocaml/opam
a3ed95caeb02: Already exists
196355c4b639: Already exists
a3ed95caeb02: Already exists
a3ed95caeb02: Already exists
a30418a1f9da: Already exists
ebb4bbb60cbb: Already exists
8a99eb5b7082: Already exists
Digest: sha256:3ba1ca32dc92cf7a3e576bbfc579252f324382dcd00ab73a0204b358dfd09da6
Status: Image is up to date for ocaml/opam:centos-7_ocaml-4.03.0_trunk_flambda
 ---> 3675d91c7ebc
Step 2 : RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" &&   sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/UnixJunkie/opam-repository.git cairo-use-conf-autoconf && opam update -u" &&   sudo -u opam sh -c "opam depext -u planets" &&   sudo -u opam sh -c "opam install -y -j 2 -v planets"
 ---> Running in 2c21ad9580f9
[91mFrom git://github.com/ocaml/opam-repository
 * branch            master     -> FETCH_HEAD
[0mUpdating 6f6eed5..080baea
Fast-forward
 packages/0install/0install.2.6.2/opam              |  1 +
 packages/0install/0install.2.8/opam                |  3 +-
 packages/0install/0install.2.9.1/opam              |  1 +
 packages/cmark/cmark.0.2.0/descr                   |  1 +
 packages/cmark/cmark.0.2.0/opam                    | 19 ++++++++
 packages/cmark/cmark.0.2.0/url                     |  2 +
 packages/conf-wxwidgets/conf-wxwidgets.3.0/descr   |  2 +
 packages/conf-wxwidgets/conf-wxwidgets.3.0/opam    | 11 +++++
 packages/llvm/llvm.3.8/descr                       |  3 ++
 packages/llvm/llvm.3.8/files/install.sh            | 50 ++++++++++++++++++++++
 packages/llvm/llvm.3.8/opam                        | 23 ++++++++++
 packages/llvm/llvm.3.8/url                         |  2 +
 packages/mirage-unix/mirage-unix.2.4.1/descr       |  1 +
 packages/mirage-unix/mirage-unix.2.4.1/opam        | 23 ++++++++++
 packages/mirage-unix/mirage-unix.2.4.1/url         |  2 +
 .../mirage-xen-minios/mirage-xen-minios.0.7.0/opam |  5 ++-
 packages/mirage-xen/mirage-xen.2.4.1/descr         |  3 ++
 packages/mirage-xen/mirage-xen.2.4.1/opam          | 30 +++++++++++++
 packages/mirage-xen/mirage-xen.2.4.1/url           |  2 +
 packages/msat/msat.0.2/opam                        |  1 +
 packages/pcap-format/pcap-format.0.3.1/opam        | 10 +++++
 packages/pcap-format/pcap-format.0.3.2/opam        | 10 +++++
 packages/pcap-format/pcap-format.0.3.3/opam        | 14 +++++-
 packages/ppx_expect/ppx_expect.113.33.01/descr     |  2 +
 packages/ppx_expect/ppx_expect.113.33.01/opam      | 30 +++++++++++++
 packages/ppx_expect/ppx_expect.113.33.01/url       |  2 +
 packages/stog-rdf/stog-rdf.0.10.0/opam             | 12 ++++--
 packages/stog-rdf/stog-rdf.0.11.0/opam             | 12 ++++--
 packages/stog-rdf/stog-rdf.0.15.0/opam             |  2 +-
 packages/stog-rdf/stog-rdf.0.16.0/opam             |  2 +-
 packages/stog-rdf/stog-rdf.0.6/descr               |  1 -
 packages/stog-rdf/stog-rdf.0.6/opam                | 12 ------
 packages/stog-rdf/stog-rdf.0.6/url                 |  2 -
 packages/stog-rdf/stog-rdf.0.8.0/descr             |  1 -
 packages/stog-rdf/stog-rdf.0.8.0/opam              | 12 ------
 packages/stog-rdf/stog-rdf.0.8.0/url               |  2 -
 packages/stog-rdf/stog-rdf.0.9.0/descr             |  1 -
 packages/stog-rdf/stog-rdf.0.9.0/findlib           |  1 -
 packages/stog-rdf/stog-rdf.0.9.0/opam              | 16 -------
 packages/stog-rdf/stog-rdf.0.9.0/url               |  2 -
 .../toplevel_expect_test.113.33.01/descr           |  5 +++
 .../toplevel_expect_test.113.33.01/opam            | 31 ++++++++++++++
 .../toplevel_expect_test.113.33.01/url             |  2 +
 .../toplevel_expect_test.113.33.02/descr           |  5 +++
 .../toplevel_expect_test.113.33.02/opam            | 31 ++++++++++++++
 .../toplevel_expect_test.113.33.02/url             |  2 +
 packages/wxOCaml/wxOCaml.1.0.1/opam                |  5 +--
 47 files changed, 347 insertions(+), 65 deletions(-)
 create mode 100644 packages/cmark/cmark.0.2.0/descr
 create mode 100644 packages/cmark/cmark.0.2.0/opam
 create mode 100644 packages/cmark/cmark.0.2.0/url
 create mode 100644 packages/conf-wxwidgets/conf-wxwidgets.3.0/descr
 create mode 100644 packages/conf-wxwidgets/conf-wxwidgets.3.0/opam
 create mode 100644 packages/llvm/llvm.3.8/descr
 create mode 100755 packages/llvm/llvm.3.8/files/install.sh
 create mode 100644 packages/llvm/llvm.3.8/opam
 create mode 100644 packages/llvm/llvm.3.8/url
 create mode 100644 packages/mirage-unix/mirage-unix.2.4.1/descr
 create mode 100644 packages/mirage-unix/mirage-unix.2.4.1/opam
 create mode 100644 packages/mirage-unix/mirage-unix.2.4.1/url
 create mode 100644 packages/mirage-xen/mirage-xen.2.4.1/descr
 create mode 100644 packages/mirage-xen/mirage-xen.2.4.1/opam
 create mode 100644 packages/mirage-xen/mirage-xen.2.4.1/url
 create mode 100644 packages/ppx_expect/ppx_expect.113.33.01/descr
 create mode 100644 packages/ppx_expect/ppx_expect.113.33.01/opam
 create mode 100644 packages/ppx_expect/ppx_expect.113.33.01/url
 delete mode 100644 packages/stog-rdf/stog-rdf.0.6/descr
 delete mode 100644 packages/stog-rdf/stog-rdf.0.6/opam
 delete mode 100644 packages/stog-rdf/stog-rdf.0.6/url
 delete mode 100644 packages/stog-rdf/stog-rdf.0.8.0/descr
 delete mode 100644 packages/stog-rdf/stog-rdf.0.8.0/opam
 delete mode 100644 packages/stog-rdf/stog-rdf.0.8.0/url
 delete mode 100644 packages/stog-rdf/stog-rdf.0.9.0/descr
 delete mode 100644 packages/stog-rdf/stog-rdf.0.9.0/findlib
 delete mode 100644 packages/stog-rdf/stog-rdf.0.9.0/opam
 delete mode 100644 packages/stog-rdf/stog-rdf.0.9.0/url
 create mode 100644 packages/toplevel_expect_test/toplevel_expect_test.113.33.01/descr
 create mode 100644 packages/toplevel_expect_test/toplevel_expect_test.113.33.01/opam
 create mode 100644 packages/toplevel_expect_test/toplevel_expect_test.113.33.01/url
 create mode 100644 packages/toplevel_expect_test/toplevel_expect_test.113.33.02/descr
 create mode 100644 packages/toplevel_expect_test/toplevel_expect_test.113.33.02/opam
 create mode 100644 packages/toplevel_expect_test/toplevel_expect_test.113.33.02/url

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized

Everything as up-to-date as possible (run with --verbose to show unavailable
upgrades).
[91mFrom https://github.com/UnixJunkie/opam-repository
 * branch            cairo-use-conf-autoconf -> FETCH_HEAD
[0mMerge made by the 'recursive' strategy.
 packages/cairo/cairo.0.4.1/opam | 7 +++----
 packages/cairo/cairo.0.4.2/opam | 7 +++----
 packages/cairo/cairo.1.2.0/opam | 7 ++-----
 3 files changed, 8 insertions(+), 13 deletions(-)

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized

Everything as up-to-date as possible (run with --verbose to show unavailable
upgrades).
# Detecting depexts using flags: x86_64 linux centos
# The following system packages are needed:
#  - m4
#  - ncurses-devel
#  - pkgconfig
Name        : m4
Version     : 1.4.16
Release     : 10.el7
Architecture: x86_64
Install Date: Wed Mar 16 14:18:58 2016
Group       : Applications/Text
Size        : 525707
License     : GPLv3+
Signature   : RSA/SHA256, Wed Nov 25 15:16:04 2015, Key ID 24c6a8a7f4a80eb5
Source RPM  : m4-1.4.16-10.el7.src.rpm
Build Date  : Fri Nov 20 07:28:07 2015
Build Host  : worker1.bsys.centos.org
Relocations : (not relocatable)
Packager    : CentOS BuildSystem <http://bugs.centos.org>
Vendor      : CentOS
URL         : http://www.gnu.org/software/m4/
Summary     : The GNU macro processor
Description :
A GNU implementation of the traditional UNIX macro processor.  M4 is
useful for writing text files which can be logically parsed, and is used
by many programs as part of their build process.  M4 has built-in
functions for including files, running shell commands, doing arithmetic,
etc.  The autoconf program needs m4 for generating configure scripts, but
not for running configure scripts.

Install m4 if you need a macro processor.
package ncurses-devel is not installed
Name        : pkgconfig
Epoch       : 1
Version     : 0.27.1
Release     : 4.el7
Architecture: x86_64
Install Date: Fri Mar  4 06:12:02 2016
Group       : Development/Tools
Size        : 105522
License     : GPLv2+
Signature   : RSA/SHA256, Fri Jul  4 04:28:33 2014, Key ID 24c6a8a7f4a80eb5
Source RPM  : pkgconfig-0.27.1-4.el7.src.rpm
Build Date  : Mon Jun  9 22:05:48 2014
Build Host  : worker1.bsys.centos.org
Relocations : (not relocatable)
Packager    : CentOS BuildSystem <http://bugs.centos.org>
Vendor      : CentOS
URL         : http://pkgconfig.freedesktop.org
Summary     : A tool for determining compilation options
Description :
The pkgconfig tool determines compilation options. For each required
library, it reads the configuration file and outputs the necessary
compiler and linker flags.
# The following new OS packages need to be installed: ncurses-devel
Not running as root, the following command will be run through "sudo":
    yum -y update
Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.mhd.uk.as44574.net
 * extras: mirrors.clouvider.net
 * updates: mirrors.clouvider.net
Resolving Dependencies
--> Running transaction check
---> Package bind-license.noarch 32:9.9.4-29.el7_2.2 will be updated
---> Package bind-license.noarch 32:9.9.4-29.el7_2.3 will be an update
---> Package libssh2.x86_64 0:1.4.3-10.el7 will be updated
---> Package libssh2.x86_64 0:1.4.3-10.el7_2.1 will be an update
---> Package nss-util.x86_64 0:3.19.1-4.el7_1 will be updated
---> Package nss-util.x86_64 0:3.19.1-9.el7_2 will be an update
---> Package openssh.x86_64 0:6.6.1p1-23.el7_2 will be updated
---> Package openssh.x86_64 0:6.6.1p1-25.el7_2 will be an update
---> Package openssh-clients.x86_64 0:6.6.1p1-23.el7_2 will be updated
---> Package openssh-clients.x86_64 0:6.6.1p1-25.el7_2 will be an update
---> Package tzdata.noarch 0:2016a-1.el7 will be updated
---> Package tzdata.noarch 0:2016b-1.el7 will be an update
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package              Arch        Version                    Repository    Size
================================================================================
Updating:
 bind-license         noarch      32:9.9.4-29.el7_2.3        updates       82 k
 libssh2              x86_64      1.4.3-10.el7_2.1           updates      134 k
 nss-util             x86_64      3.19.1-9.el7_2             updates       71 k
 openssh              x86_64      6.6.1p1-25.el7_2           updates      435 k
 openssh-clients      x86_64      6.6.1p1-25.el7_2           updates      639 k
 tzdata               noarch      2016b-1.el7                updates      433 k

Transaction Summary
================================================================================
Upgrade  6 Packages

Total download size: 1.8 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
--------------------------------------------------------------------------------
Total                                              2.1 MB/s | 1.8 MB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : openssh-6.6.1p1-25.el7_2.x86_64                             1/12 
  Updating   : openssh-clients-6.6.1p1-25.el7_2.x86_64                     2/12 
  Updating   : nss-util-3.19.1-9.el7_2.x86_64                              3/12 
  Updating   : libssh2-1.4.3-10.el7_2.1.x86_64                             4/12 
  Updating   : 32:bind-license-9.9.4-29.el7_2.3.noarch                     5/12 
  Updating   : tzdata-2016b-1.el7.noarch                                   6/12 
  Cleanup    : 32:bind-license-9.9.4-29.el7_2.2.noarch                     7/12 
  Cleanup    : tzdata-2016a-1.el7.noarch                                   8/12 
  Cleanup    : openssh-clients-6.6.1p1-23.el7_2.x86_64                     9/12 
  Cleanup    : openssh-6.6.1p1-23.el7_2.x86_64                            10/12 
  Cleanup    : nss-util-3.19.1-4.el7_1.x86_64                             11/12 
  Cleanup    : libssh2-1.4.3-10.el7.x86_64                                12/12 
  Verifying  : tzdata-2016b-1.el7.noarch                                   1/12 
  Verifying  : openssh-6.6.1p1-25.el7_2.x86_64                             2/12 
  Verifying  : 32:bind-license-9.9.4-29.el7_2.3.noarch                     3/12 
  Verifying  : libssh2-1.4.3-10.el7_2.1.x86_64                             4/12 
  Verifying  : openssh-clients-6.6.1p1-25.el7_2.x86_64                     5/12 
  Verifying  : nss-util-3.19.1-9.el7_2.x86_64                              6/12 
  Verifying  : libssh2-1.4.3-10.el7.x86_64                                 7/12 
  Verifying  : tzdata-2016a-1.el7.noarch                                   8/12 
  Verifying  : 32:bind-license-9.9.4-29.el7_2.2.noarch                     9/12 
  Verifying  : openssh-clients-6.6.1p1-23.el7_2.x86_64                    10/12 
  Verifying  : openssh-6.6.1p1-23.el7_2.x86_64                            11/12 
  Verifying  : nss-util-3.19.1-4.el7_1.x86_64                             12/12 

Updated:
  bind-license.noarch 32:9.9.4-29.el7_2.3    libssh2.x86_64 0:1.4.3-10.el7_2.1 
  nss-util.x86_64 0:3.19.1-9.el7_2           openssh.x86_64 0:6.6.1p1-25.el7_2 
  openssh-clients.x86_64 0:6.6.1p1-25.el7_2  tzdata.noarch 0:2016b-1.el7       

Complete!
# OS package update successful
Not running as root, the following command will be run through "sudo":
    yum install -y ncurses-devel
Not running as root, the following command will be run through "sudo":
    rpm -q ncurses-devel
Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.mhd.uk.as44574.net
 * extras: mirrors.clouvider.net
 * updates: mirrors.clouvider.net
Resolving Dependencies
--> Running transaction check
---> Package ncurses-devel.x86_64 0:5.9-13.20130511.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package             Arch         Version                      Repository  Size
================================================================================
Installing:
 ncurses-devel       x86_64       5.9-13.20130511.el7          base       713 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 713 k
Installed size: 2.1 M
Downloading packages:
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : ncurses-devel-5.9-13.20130511.el7.x86_64                     1/1 
  Verifying  : ncurses-devel-5.9-13.20130511.el7.x86_64                     1/1 

Installed:
  ncurses-devel.x86_64 0:5.9-13.20130511.el7                                    

Complete!
ncurses-devel-5.9-13.20130511.el7.x86_64
# OS packages installation successful
The following dependencies couldn't be met:
  - planets -> core < 113.24.00
Your request can't be satisfied:
  - core<113.24.00 is not available because your system doesn't comply with ocaml-version >= "4.02.1" & ocaml-version < "4.03".

No solution found, exiting
[91m'opam install -y -j 2 -v planets' failed.
[0mThe command '/bin/sh -c sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" &&   sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/UnixJunkie/opam-repository.git cairo-use-conf-autoconf && opam update -u" &&   sudo -u opam sh -c "opam depext -u planets" &&   sudo -u opam sh -c "opam install -y -j 2 -v planets"' returned a non-zero code: 3
