Running this Dockerfile:
FROM ocaml/opam:centos-7_ocaml-4.03.0_trunk_flambda
RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" && \
  sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/seliopou/opam-repository.git opam-publish/aws-rds.0.1.0 && opam update -u" && \
  sudo -u opam sh -c "opam depext -u aws-rds" && \
  sudo -u opam sh -c "opam install -y -j 2 -v aws-rds"Sending build context to Docker daemon 78.34 kB
Step 1 : FROM ocaml/opam:centos-7_ocaml-4.03.0_trunk_flambda
centos-7_ocaml-4.03.0_trunk_flambda: Pulling from ocaml/opam
a3ed95caeb02: Already exists
5989106db7fb: Pulling fs layer
a3ed95caeb02: Pulling fs layer
98d281016d7d: Pulling fs layer
58cde57319ce: Pulling fs layer
d3ddbf770056: Pulling fs layer
98d281016d7d: Waiting
58cde57319ce: Waiting
5989106db7fb: Waiting
d3ddbf770056: Waiting
a3ed95caeb02: Waiting
5989106db7fb: Verifying Checksum
5989106db7fb: Download complete
5989106db7fb: Pull complete
5989106db7fb: Pull complete
a3ed95caeb02: Pull complete
a3ed95caeb02: Pull complete
98d281016d7d: Verifying Checksum
98d281016d7d: Download complete
98d281016d7d: Pull complete
98d281016d7d: Pull complete
58cde57319ce: Download complete
58cde57319ce: Pull complete
58cde57319ce: Pull complete
d3ddbf770056: Verifying Checksum
d3ddbf770056: Download complete
d3ddbf770056: Pull complete
d3ddbf770056: Pull complete
Digest: sha256:d718cbc24823ad48e49401975524853e02d5cff2ebe5d6e66e80cf25942f47e9
Status: Downloaded newer image for ocaml/opam:centos-7_ocaml-4.03.0_trunk_flambda
 ---> efaa32a929dc
Step 2 : RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" &&   sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/seliopou/opam-repository.git opam-publish/aws-rds.0.1.0 && opam update -u" &&   sudo -u opam sh -c "opam depext -u aws-rds" &&   sudo -u opam sh -c "opam install -y -j 2 -v aws-rds"
 ---> Running in c87d2f08ba5a
[91mFrom git://github.com/ocaml/opam-repository
 * branch            master     -> FETCH_HEAD
[0mUpdating 1a10bdc..c0cde63
Fast-forward
 packages/argon2/argon2.0.2/descr |  3 +++
 packages/argon2/argon2.0.2/opam  | 23 +++++++++++++++++++++++
 packages/argon2/argon2.0.2/url   |  2 ++
 3 files changed, 28 insertions(+)
 create mode 100644 packages/argon2/argon2.0.2/descr
 create mode 100644 packages/argon2/argon2.0.2/opam
 create mode 100644 packages/argon2/argon2.0.2/url

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[depext: git] Command started
[depext: git] Command started
[depext: git] Command started
[depext: git] Command started
[depext] https://github.com/ocaml/opam-depext.git already up-to-date

Everything as up-to-date as possible (run with --verbose to show unavailable
upgrades).
[91mFrom https://github.com/seliopou/opam-repository
 * branch            opam-publish/aws-rds.0.1.0 -> FETCH_HEAD
[0mMerge made by the 'recursive' strategy.
 packages/aws-rds/aws-rds.0.1.0/descr |  1 +
 packages/aws-rds/aws-rds.0.1.0/opam  | 20 ++++++++++++++++++++
 packages/aws-rds/aws-rds.0.1.0/url   |  2 ++
 3 files changed, 23 insertions(+)
 create mode 100644 packages/aws-rds/aws-rds.0.1.0/descr
 create mode 100644 packages/aws-rds/aws-rds.0.1.0/opam
 create mode 100644 packages/aws-rds/aws-rds.0.1.0/url

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[depext: git] Command started
[depext: git] Command started
[depext: git] Command started
[depext: git] Command started
[depext] https://github.com/ocaml/opam-depext.git already up-to-date

Everything as up-to-date as possible (run with --verbose to show unavailable
upgrades).
# Detecting depexts using flags: x86_64 linux centos
# The following system packages are needed:
#  - gmp
#  - gmp-devel
#  - m4
#  - ncurses-devel
#  - pkgconfig
#  - xen-devel
Name        : gmp
Epoch       : 1
Version     : 6.0.0
Release     : 12.el7_1
Architecture: x86_64
Install Date: Thu Mar 31 17:01:17 2016
Group       : System Environment/Libraries
Size        : 652070
License     : LGPLv3+ or GPLv2+
Signature   : RSA/SHA256, Tue Nov  3 18:49:55 2015, Key ID 24c6a8a7f4a80eb5
Source RPM  : gmp-6.0.0-12.el7_1.src.rpm
Build Date  : Tue Nov  3 12:26:11 2015
Build Host  : worker1.bsys.centos.org
Relocations : (not relocatable)
Packager    : CentOS BuildSystem <http://bugs.centos.org>
Vendor      : CentOS
URL         : http://gmplib.org/
Summary     : A GNU arbitrary precision library
Description :
The gmp package contains GNU MP, a library for arbitrary precision
arithmetic, signed integers operations, rational numbers and floating
point numbers. GNU MP is designed for speed, for both small and very
large operands. GNU MP is fast because it uses fullwords as the basic
arithmetic type, it uses fast algorithms, it carefully optimizes
assembly code for many CPUs' most common inner loops, and it generally
emphasizes speed over simplicity/elegance in its operations.

Install the gmp package if you need a fast arbitrary precision
library.
package gmp-devel is not installed
Name        : m4
Version     : 1.4.16
Release     : 10.el7
Architecture: x86_64
Install Date: Fri Apr  8 10:52:33 2016
Group       : Applications/Text
Size        : 525707
License     : GPLv3+
Signature   : RSA/SHA256, Wed Nov 25 15:16:04 2015, Key ID 24c6a8a7f4a80eb5
Source RPM  : m4-1.4.16-10.el7.src.rpm
Build Date  : Fri Nov 20 07:28:07 2015
Build Host  : worker1.bsys.centos.org
Relocations : (not relocatable)
Packager    : CentOS BuildSystem <http://bugs.centos.org>
Vendor      : CentOS
URL         : http://www.gnu.org/software/m4/
Summary     : The GNU macro processor
Description :
A GNU implementation of the traditional UNIX macro processor.  M4 is
useful for writing text files which can be logically parsed, and is used
by many programs as part of their build process.  M4 has built-in
functions for including files, running shell commands, doing arithmetic,
etc.  The autoconf program needs m4 for generating configure scripts, but
not for running configure scripts.

Install m4 if you need a macro processor.
package ncurses-devel is not installed
Name        : pkgconfig
Epoch       : 1
Version     : 0.27.1
Release     : 4.el7
Architecture: x86_64
Install Date: Thu Mar 31 17:01:12 2016
Group       : Development/Tools
Size        : 105522
License     : GPLv2+
Signature   : RSA/SHA256, Fri Jul  4 04:28:33 2014, Key ID 24c6a8a7f4a80eb5
Source RPM  : pkgconfig-0.27.1-4.el7.src.rpm
Build Date  : Mon Jun  9 22:05:48 2014
Build Host  : worker1.bsys.centos.org
Relocations : (not relocatable)
Packager    : CentOS BuildSystem <http://bugs.centos.org>
Vendor      : CentOS
URL         : http://pkgconfig.freedesktop.org
Summary     : A tool for determining compilation options
Description :
The pkgconfig tool determines compilation options. For each required
library, it reads the configuration file and outputs the necessary
compiler and linker flags.
package xen-devel is not installed
# The following new OS packages need to be installed: gmp-devel ncurses-devel xen-devel
The following command needs to be run through "sudo":
    yum -y update
Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.sov.uk.goscomb.net
 * extras: centos.mirroring.pulsant.co.uk
 * updates: mirror.sov.uk.goscomb.net
Resolving Dependencies
--> Running transaction check
---> Package kpartx.x86_64 0:0.4.9-85.el7 will be updated
---> Package kpartx.x86_64 0:0.4.9-85.el7_2.1 will be an update
---> Package krb5-libs.x86_64 0:1.13.2-10.el7 will be updated
---> Package krb5-libs.x86_64 0:1.13.2-12.el7_2 will be an update
---> Package libblkid.x86_64 0:2.23.2-26.el7 will be updated
---> Package libblkid.x86_64 0:2.23.2-26.el7_2.2 will be an update
---> Package libmount.x86_64 0:2.23.2-26.el7 will be updated
---> Package libmount.x86_64 0:2.23.2-26.el7_2.2 will be an update
---> Package libuuid.x86_64 0:2.23.2-26.el7 will be updated
---> Package libuuid.x86_64 0:2.23.2-26.el7_2.2 will be an update
---> Package openldap.x86_64 0:2.4.40-8.el7 will be updated
---> Package openldap.x86_64 0:2.4.40-9.el7_2 will be an update
---> Package util-linux.x86_64 0:2.23.2-26.el7 will be updated
---> Package util-linux.x86_64 0:2.23.2-26.el7_2.2 will be an update
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package           Arch          Version                   Repository      Size
================================================================================
Updating:
 kpartx            x86_64        0.4.9-85.el7_2.1          updates         59 k
 krb5-libs         x86_64        1.13.2-12.el7_2           updates        843 k
 libblkid          x86_64        2.23.2-26.el7_2.2         updates        166 k
 libmount          x86_64        2.23.2-26.el7_2.2         updates        169 k
 libuuid           x86_64        2.23.2-26.el7_2.2         updates         74 k
 openldap          x86_64        2.4.40-9.el7_2            updates        348 k
 util-linux        x86_64        2.23.2-26.el7_2.2         updates        1.9 M

Transaction Summary
================================================================================
Upgrade  7 Packages

Total download size: 3.5 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
--------------------------------------------------------------------------------
Total                                              3.6 MB/s | 3.5 MB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : libuuid-2.23.2-26.el7_2.2.x86_64                            1/14 
  Updating   : libblkid-2.23.2-26.el7_2.2.x86_64                           2/14 
  Updating   : libmount-2.23.2-26.el7_2.2.x86_64                           3/14 
  Updating   : util-linux-2.23.2-26.el7_2.2.x86_64                         4/14 
  Updating   : openldap-2.4.40-9.el7_2.x86_64                              5/14 
  Updating   : krb5-libs-1.13.2-12.el7_2.x86_64                            6/14 
  Updating   : kpartx-0.4.9-85.el7_2.1.x86_64                              7/14 
  Cleanup    : util-linux-2.23.2-26.el7.x86_64                             8/14 
  Cleanup    : libmount-2.23.2-26.el7.x86_64                               9/14 
  Cleanup    : libblkid-2.23.2-26.el7.x86_64                              10/14 
  Cleanup    : libuuid-2.23.2-26.el7.x86_64                               11/14 
  Cleanup    : openldap-2.4.40-8.el7.x86_64                               12/14 
  Cleanup    : krb5-libs-1.13.2-10.el7.x86_64                             13/14 
  Cleanup    : kpartx-0.4.9-85.el7.x86_64                                 14/14 
  Verifying  : kpartx-0.4.9-85.el7_2.1.x86_64                              1/14 
  Verifying  : util-linux-2.23.2-26.el7_2.2.x86_64                         2/14 
  Verifying  : libmount-2.23.2-26.el7_2.2.x86_64                           3/14 
  Verifying  : krb5-libs-1.13.2-12.el7_2.x86_64                            4/14 
  Verifying  : libblkid-2.23.2-26.el7_2.2.x86_64                           5/14 
  Verifying  : openldap-2.4.40-9.el7_2.x86_64                              6/14 
  Verifying  : libuuid-2.23.2-26.el7_2.2.x86_64                            7/14 
  Verifying  : kpartx-0.4.9-85.el7.x86_64                                  8/14 
  Verifying  : libblkid-2.23.2-26.el7.x86_64                               9/14 
  Verifying  : util-linux-2.23.2-26.el7.x86_64                            10/14 
  Verifying  : libmount-2.23.2-26.el7.x86_64                              11/14 
  Verifying  : openldap-2.4.40-8.el7.x86_64                               12/14 
  Verifying  : krb5-libs-1.13.2-10.el7.x86_64                             13/14 
  Verifying  : libuuid-2.23.2-26.el7.x86_64                               14/14 

Updated:
  kpartx.x86_64 0:0.4.9-85.el7_2.1        krb5-libs.x86_64 0:1.13.2-12.el7_2   
  libblkid.x86_64 0:2.23.2-26.el7_2.2     libmount.x86_64 0:2.23.2-26.el7_2.2  
  libuuid.x86_64 0:2.23.2-26.el7_2.2      openldap.x86_64 0:2.4.40-9.el7_2     
  util-linux.x86_64 0:2.23.2-26.el7_2.2  

Complete!
# OS package update successful
The following command needs to be run through "sudo":
    yum install -y gmp-devel ncurses-devel xen-devel
Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sov.uk.goscomb.net
 * extras: centos.mirroring.pulsant.co.uk
 * updates: mirror.sov.uk.goscomb.net
No package xen-devel available.
Resolving Dependencies
--> Running transaction check
---> Package gmp-devel.x86_64 1:6.0.0-12.el7_1 will be installed
---> Package ncurses-devel.x86_64 0:5.9-13.20130511.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package             Arch         Version                   Repository     Size
================================================================================
Installing:
 gmp-devel           x86_64       1:6.0.0-12.el7_1          updates       181 k
 ncurses-devel       x86_64       5.9-13.20130511.el7       base          713 k

Transaction Summary
================================================================================
Install  2 Packages

Total download size: 893 k
Installed size: 2.5 M
Downloading packages:
--------------------------------------------------------------------------------
Total                                              1.3 MB/s | 893 kB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : ncurses-devel-5.9-13.20130511.el7.x86_64                     1/2 
  Installing : 1:gmp-devel-6.0.0-12.el7_1.x86_64                            2/2 
  Verifying  : 1:gmp-devel-6.0.0-12.el7_1.x86_64                            1/2 
  Verifying  : ncurses-devel-5.9-13.20130511.el7.x86_64                     2/2 

Installed:
  gmp-devel.x86_64 1:6.0.0-12.el7_1  ncurses-devel.x86_64 0:5.9-13.20130511.el7 

Complete!
The following command needs to be run through "sudo":
    rpm -q gmp-devel ncurses-devel xen-devel
gmp-devel-6.0.0-12.el7_1.x86_64
ncurses-devel-5.9-13.20130511.el7.x86_64
package xen-devel is not installed
[91mOS package installation failed
[0mThe command '/bin/sh -c sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" &&   sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/seliopou/opam-repository.git opam-publish/aws-rds.0.1.0 && opam update -u" &&   sudo -u opam sh -c "opam depext -u aws-rds" &&   sudo -u opam sh -c "opam install -y -j 2 -v aws-rds"' returned a non-zero code: 1
