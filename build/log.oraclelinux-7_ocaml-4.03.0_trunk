Running this Dockerfile:
FROM ocaml/opam:oraclelinux-7_ocaml-4.03.0_trunk
RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" && \
  sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/craff/opam-repository.git master && opam update -u" && \
  sudo -u opam sh -c "opam depext -u imagelib" && \
  sudo -u opam sh -c "opam install -y -j 2 -v imagelib"Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.044 MB
Step 1 : FROM ocaml/opam:oraclelinux-7_ocaml-4.03.0_trunk
oraclelinux-7_ocaml-4.03.0_trunk: Pulling from ocaml/opam
a3ed95caeb02: Already exists
ffe36b360c6d: Already exists
a3ed95caeb02: Already exists
10dc5abdb7d2: Already exists
d8925003006e: Already exists
78d2b85aed33: Already exists
Digest: sha256:ca95832ecede7c5f09f0c5ad26ac8220f02a0f06c4b4928d2f37364b5a82b7a3
Status: Image is up to date for ocaml/opam:oraclelinux-7_ocaml-4.03.0_trunk
 ---> 4253a6bae3c8
Step 2 : RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" &&   sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/craff/opam-repository.git master && opam update -u" &&   sudo -u opam sh -c "opam depext -u imagelib" &&   sudo -u opam sh -c "opam install -y -j 2 -v imagelib"
 ---> Running in 5d2ec64f8dd8
[91mFrom git://github.com/ocaml/opam-repository
 * branch            master     -> FETCH_HEAD
[0mUpdating 75c44d3..2bd1001
Fast-forward
 compilers/4.04.0/4.04.0+pr336/4.04.0+pr336.comp  | 11 --------
 compilers/4.04.0/4.04.0+pr336/4.04.0+pr336.descr |  1 -
 compilers/4.04.0/4.04.0+pr535/4.04.0+pr535.comp  | 11 --------
 compilers/4.04.0/4.04.0+pr535/4.04.0+pr535.descr |  1 -
 packages/oci/oci.0.3/descr                       |  4 +++
 packages/oci/oci.0.3/opam                        | 34 ++++++++++++++++++++++++
 packages/oci/oci.0.3/url                         |  2 ++
 7 files changed, 40 insertions(+), 24 deletions(-)
 delete mode 100644 compilers/4.04.0/4.04.0+pr336/4.04.0+pr336.comp
 delete mode 100644 compilers/4.04.0/4.04.0+pr336/4.04.0+pr336.descr
 delete mode 100644 compilers/4.04.0/4.04.0+pr535/4.04.0+pr535.comp
 delete mode 100644 compilers/4.04.0/4.04.0+pr535/4.04.0+pr535.descr
 create mode 100644 packages/oci/oci.0.3/descr
 create mode 100644 packages/oci/oci.0.3/opam
 create mode 100644 packages/oci/oci.0.3/url

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[depext: git] Command started
[depext: git] Command started
[depext: git] Command started
[depext: git] Command started
[depext] https://github.com/ocaml/opam-depext.git already up-to-date

Everything as up-to-date as possible (run with --verbose to show unavailable
upgrades).
[91mFrom https://github.com/craff/opam-repository
 * branch            master     -> FETCH_HEAD
[0mMerge made by the 'recursive' strategy.
 packages/imagelib/imagelib.20160413/descr | 17 +++++++++++++++++
 packages/imagelib/imagelib.20160413/opam  | 19 +++++++++++++++++++
 packages/imagelib/imagelib.20160413/url   |  2 ++
 3 files changed, 38 insertions(+)
 create mode 100644 packages/imagelib/imagelib.20160413/descr
 create mode 100644 packages/imagelib/imagelib.20160413/opam
 create mode 100644 packages/imagelib/imagelib.20160413/url

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized

=-=- Synchronizing development packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[depext: git] Command started
[depext: git] Command started
[depext: git] Command started
[depext: git] Command started
[depext] https://github.com/ocaml/opam-depext.git already up-to-date

Everything as up-to-date as possible (run with --verbose to show unavailable
upgrades).
# Detecting depexts using flags: x86_64 linux oraclelinux
# The following system packages are needed:
#  - m4
#  - ncurses-devel
#  - pkgconfig
Name        : m4
Version     : 1.4.16
Release     : 10.el7
Architecture: x86_64
Install Date: Fri Apr  8 10:53:28 2016
Group       : Applications/Text
Size        : 521587
License     : GPLv3+
Signature   : RSA/SHA256, Wed Sep 30 19:02:18 2015, Key ID 72f97b74ec551f03
Source RPM  : m4-1.4.16-10.el7.src.rpm
Build Date  : Thu Sep 10 05:22:26 2015
Build Host  : x86-ol7-builder-04.us.oracle.com
Relocations : (not relocatable)
Vendor      : Oracle America
URL         : http://www.gnu.org/software/m4/
Summary     : The GNU macro processor
Description :
A GNU implementation of the traditional UNIX macro processor.  M4 is
useful for writing text files which can be logically parsed, and is used
by many programs as part of their build process.  M4 has built-in
functions for including files, running shell commands, doing arithmetic,
etc.  The autoconf program needs m4 for generating configure scripts, but
not for running configure scripts.

Install m4 if you need a macro processor.
package ncurses-devel is not installed
Name        : pkgconfig
Epoch       : 1
Version     : 0.27.1
Release     : 4.el7
Architecture: x86_64
Install Date: Wed Mar  2 00:56:52 2016
Group       : Development/Tools
Size        : 105554
License     : GPLv2+
Signature   : RSA/SHA256, Wed May 14 01:02:50 2014, Key ID 72f97b74ec551f03
Source RPM  : pkgconfig-0.27.1-4.el7.src.rpm
Build Date  : Sat May  3 17:34:09 2014
Build Host  : ca-buildj3.us.oracle.com
Relocations : (not relocatable)
Vendor      : Oracle America
URL         : http://pkgconfig.freedesktop.org
Summary     : A tool for determining compilation options
Description :
The pkgconfig tool determines compilation options. For each required
library, it reads the configuration file and outputs the necessary
compiler and linker flags.
# The following new OS packages need to be installed: ncurses-devel
The following command needs to be run through "sudo":
    echo Skipping system update on this platform.
Skipping system update on this platform.
# OS package update successful
The following command needs to be run through "sudo":
    yum install -y ncurses-devel
Loaded plugins: ulninfo
Resolving Dependencies
--> Running transaction check
---> Package ncurses-devel.x86_64 0:5.9-13.20130511.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package            Arch        Version                   Repository       Size
================================================================================
Installing:
 ncurses-devel      x86_64      5.9-13.20130511.el7       ol7_latest      712 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 712 k
Installed size: 2.1 M
Downloading packages:
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : ncurses-devel-5.9-13.20130511.el7.x86_64                     1/1 
  Verifying  : ncurses-devel-5.9-13.20130511.el7.x86_64                     1/1 

Installed:
  ncurses-devel.x86_64 0:5.9-13.20130511.el7                                    

Complete!
The following command needs to be run through "sudo":
    rpm -q ncurses-devel
ncurses-devel-5.9-13.20130511.el7.x86_64
# OS packages installation successful
The following actions will be performed:
  - install conf-pkg-config 1.0                                 [required by conf-ncurses]
  - install conf-m4         1                                   [required by ocamlfind]
  - install conf-ncurses    1                                   [required by ocamlfind]
  - install ocamlfind       1.6.2                               [required by imagelib]
  - install camlzip         1.05                                [required by imagelib]
  - install imagelib        20160413
===== 6 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[camlzip: http] Command started
[imagelib: http] Command started
[ocamlfind: http] Command started
[camlzip: http] Command started
[ocamlfind: http] Command started
[ocamlfind.1.6.2] http://download.camlcity.org/download/findlib-1.6.2.tar.gz downloaded
[camlzip.1.05] http://forge.ocamlcore.org/frs/download.php/1037/camlzip-1.05.tar.gz downloaded
[imagelib: http] Command started
[imagelib.20160413] http://patoline.org/archive/imagelib/imagelib_20160413.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[conf-m4: sh echo | m4] Command started
[conf-pkg-config: pkg-config] Command started
+ pkg-config "--help" (CWD=/home/opam/.opam/4.03.0+trunk/build/conf-pkg-config.1.0)
- Usage:
-   pkg-config [OPTION...]
- 
- Help Options:
-   -h, --help                              Show help options
- 
- Application Options:
-   --version                               output version of pkg-config
-   --modversion                            output version for package
-   --atleast-pkgconfig-version=VERSION     require given version of pkg-config
-   --libs                                  output all linker flags
-   --static                                output linker flags for static linking
-   --short-errors                          print short errors
-   --libs-only-l                           output -l flags
-   --libs-only-other                       output other libs (e.g. -pthread)
-   --libs-only-L                           output -L flags
-   --cflags                                output all pre-processor and compiler flags
-   --cflags-only-I                         output -I flags
-   --cflags-only-other                     output cflags not covered by the cflags-only-I option
-   --variable=NAME                         get the value of variable named NAME
-   --define-variable=NAME=VALUE            set variable NAME to VALUE
-   --exists                                return 0 if the module(s) exist
-   --print-variables                       output list of variables defined by the module
-   --uninstalled                           return 0 if the uninstalled version of one or more module(s) or their dependencies will be used
-   --atleast-version=VERSION               return 0 if the module is at least version VERSION
-   --exact-version=VERSION                 return 0 if the module is at exactly version VERSION
-   --max-version=VERSION                   return 0 if the module is at no newer than version VERSION
-   --list-all                              list all known packages
-   --debug                                 show verbose debug information
-   --print-errors                          show verbose information about missing or conflicting packages,default if --cflags or --libs given on the command line
-   --silence-errors                        be silent about errors (default unless --cflags or --libsgiven on the command line)
-   --errors-to-stdout                      print errors from --print-errors to stdout not stderr
-   --print-provides                        print which packages the package provides
-   --print-requires                        print which packages the package requires
-   --print-requires-private                print which packages the package requires for static linking
- 
-> installed conf-pkg-config.1.0
[conf-ncurses: pkg-config ncurses] Command started
+ sh "-exc" "echo | m4" (CWD=/home/opam/.opam/4.03.0+trunk/build/conf-m4.1)
- 
- + echo
- + m4
-> installed conf-m4.1
+ pkg-config "ncurses" (CWD=/home/opam/.opam/4.03.0+trunk/build/conf-ncurses.1)
-> installed conf-ncurses.1
[ocamlfind: ./configure] Command started
+ ./configure "-bindir" "/home/opam/.opam/4.03.0+trunk/bin" "-sitelib" "/home/opam/.opam/4.03.0+trunk/lib" "-mandir" "/home/opam/.opam/4.03.0+trunk/man" "-config" "/home/opam/.opam/4.03.0+trunk/lib/findlib.conf" (CWD=/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2)
- Welcome to findlib version 1.6.2
- Configuring core...
- Checking for #remove_directory...
- Testing threading model...
- systhread_supported: true
- Testing DLLs...
- Testing whether ppxopt can be supported...
- Configuring libraries...
- native dynlink: found
- labltk: not present
- ocamlbuild: not present
- camlp4: using camlp4, style 310
- compiler-libs: found
- dbm: not present (normal since OCaml-4.00)
- bytes: found, installing fake library
- Configuration for dynlink written to site-lib-src/dynlink/META
- Configuration for graphics written to site-lib-src/graphics/META
- Configuration for num written to site-lib-src/num/META
- Configuration for num-top written to site-lib-src/num-top/META
- Configuration for str written to site-lib-src/str/META
- Configuration for threads written to site-lib-src/threads/META
- Configuration for unix written to site-lib-src/unix/META
- Configuration for stdlib written to site-lib-src/stdlib/META
- Configuration for bigarray written to site-lib-src/bigarray/META
- Configuration for ocamldoc written to site-lib-src/ocamldoc/META
- Configuration for camlp4 written to site-lib-src/camlp4/META
- Configuration for compiler-libs written to site-lib-src/compiler-libs/META
- Configuration for bytes written to site-lib-src/bytes/META
- Detecting compiler arguments: (extractor built) ok
- 
- About the OCAML core installation:
-     Standard library:      /home/opam/.opam/4.03.0+trunk/lib/ocaml
-     Binaries:              /home/opam/.opam/4.03.0+trunk/bin
-     Manual pages:          /home/opam/.opam/4.03.0+trunk/man
-     Multi-threading type:  posix
- The directory of site-specific packages will be
-     site-lib:              /home/opam/.opam/4.03.0+trunk/lib
- The configuration file is written to:
-     findlib config file:   /home/opam/.opam/4.03.0+trunk/lib/findlib.conf
- Software will be installed:
-     Libraries:             in <site-lib>/findlib
-     Binaries:              /home/opam/.opam/4.03.0+trunk/bin
-     Manual pages:          /home/opam/.opam/4.03.0+trunk/man
-     topfind script:        /home/opam/.opam/4.03.0+trunk/lib/ocaml
- Topfind ppxopt support:    yes
- Toolbox:                   no
- Link custom runtime:       yes
- Need bytes compatibility:  no
- 
- Configuration has been written to Makefile.config
- 
- You can now do 'make all', and optionally 'make opt', to build ocamlfind.
[ocamlfind: make all] Command started
+ make "all" (CWD=/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2)
- for p in findlib; do ( cd src/$p; make all ) || exit; done
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- ocamllex fl_meta.mll
- 22 states, 392 transitions, table size 1700 bytes
- ocamldep *.ml *.mli >depend
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- USE_CYGPATH="0"; \
- export USE_CYGPATH; \
- cat findlib_config.mlp | \
- 	../../tools/patch '@CONFIGFILE@' '/home/opam/.opam/4.03.0+trunk/lib/findlib.conf' | \
- 	../../tools/patch '@STDLIB@' '/home/opam/.opam/4.03.0+trunk/lib/ocaml' | \
- 	sed -e 's;@AUTOLINK@;true;g' \
- 	    -e 's;@SYSTEM@;linux;g' \
- 	     >findlib_config.ml
- ocamlc -I +compiler-libs -g -c findlib_config.ml
- ocamlc -I +compiler-libs -g -c fl_split.ml
- ocamlc -I +compiler-libs -g -c fl_metatoken.ml
- ocamlc -I +compiler-libs -g -c fl_meta.ml
- ocamlc -I +compiler-libs -c fl_metascanner.mli
- ocamlc -I +compiler-libs -g -c fl_metascanner.ml
- Makefile:175: depend: No such file or directory
- ocamlc -I +compiler-libs -c fl_topo.mli
- ocamlc -I +compiler-libs -g -c fl_topo.ml
- ocamlc -I +compiler-libs -c fl_package_base.mli
- ocamlc -I +compiler-libs -g -c fl_package_base.ml
- ocamlc -I +compiler-libs -c findlib.mli
- ocamlc -I +compiler-libs -g -c findlib.ml
- ocamlc -I +compiler-libs -g -c fl_args.ml
- ocamlc -I +compiler-libs -g -c fl_lint.ml
- ocamlc -I +compiler-libs -a -o findlib.cma findlib_config.cmo fl_split.cmo fl_metatoken.cmo fl_meta.cmo fl_metascanner.cmo fl_topo.cmo fl_package_base.cmo findlib.cmo fl_args.cmo fl_lint.cmo
- ocamlc -I +compiler-libs -g -c ocaml_args.ml
- ocamlc -I +compiler-libs -g -c frontend.ml
- File "frontend.ml", line 1787, characters 16-29:
- Warning 3: deprecated: String.create
- Use Bytes.create instead.
- File "frontend.ml", line 2184, characters 25-41:
- Warning 3: deprecated: String.lowercase
- Use String.lowercase_ascii instead.
- File "frontend.ml", line 2189, characters 16-32:
- Warning 3: deprecated: String.lowercase
- Use String.lowercase_ascii instead.
- ocamlc -I +compiler-libs -custom -o ocamlfind -g findlib.cma unix.cma \
-            ocaml_args.cmo frontend.cmo
- if [ "true" = "true" ]; then                 \
- 	cp topfind.ml.in topfind.ml;                             \
- else                                                             \
- 	sed -e '/PPXOPT_BEGIN/,/PPXOPT_END/ d' topfind.ml.in     \
- 		> topfind.ml ;                                   \
- fi
- ocamlc -I +compiler-libs -c topfind.mli
- ocamlc -I +compiler-libs -g -c topfind.ml
- ocamlc -I +compiler-libs -a -o findlib_top.cma topfind.cmo
- USE_CYGPATH="0"; \
- export USE_CYGPATH; \
- cat topfind_rd1.p | \
- 	../../tools/patch '@SITELIB@' '/home/opam/.opam/4.03.0+trunk/lib' \
-     	    >topfind
- ocamlc -I +compiler-libs -c num_top_printers.mli
- ocamlc -I +compiler-libs -g -c num_top_printers.ml
- ocamlc -I +compiler-libs -c num_top.mli
- ocamlc -I +compiler-libs -g -c num_top.ml
- ocamlc -I +compiler-libs -a -o num_top.cma num_top_printers.cmo num_top.cmo
- ocamlc -I +compiler-libs -c fl_dynload.mli
- ocamlc -I +compiler-libs -g -c fl_dynload.ml
- ocamlc -I +compiler-libs -a -o findlib_dynload.cma fl_dynload.cmo
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- make all-config
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2'
- USE_CYGPATH="0"; \
- export USE_CYGPATH; \
- cat findlib.conf.in | \
- 	tools/patch '@SITELIB@' '/home/opam/.opam/4.03.0+trunk/lib' >findlib.conf
- if ocamlc.opt >/dev/null 2>&1; then \
- 	echo 'ocamlc="ocamlc.opt"' >>findlib.conf; \
- fi
- if ocamlopt.opt >/dev/null 2>&1; then \
- 	echo 'ocamlopt="ocamlopt.opt"' >>findlib.conf; \
- fi
- if ocamldep.opt >/dev/null 2>&1; then \
- 	echo 'ocamldep="ocamldep.opt"' >>findlib.conf; \
- fi
- if ocamldoc.opt >/dev/null 2>&1; then \
- 	echo 'ocamldoc="ocamldoc.opt"' >>findlib.conf; \
- fi
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2'
[ocamlfind: make opt] Command started
+ make "opt" (CWD=/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2)
- for p in findlib; do ( cd src/$p; make opt ) || exit; done
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- ocamldep *.ml *.mli >depend
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- ocamlopt -I +compiler-libs -c findlib_config.ml
- ocamlopt -I +compiler-libs -c fl_split.ml
- ocamlopt -I +compiler-libs -c fl_metatoken.ml
- ocamlopt -I +compiler-libs -c fl_meta.ml
- ocamlopt -I +compiler-libs -c fl_metascanner.ml
- ocamlopt -I +compiler-libs -c fl_topo.ml
- ocamlopt -I +compiler-libs -c fl_package_base.ml
- ocamlopt -I +compiler-libs -c findlib.ml
- ocamlopt -I +compiler-libs -c fl_args.ml
- ocamlopt -I +compiler-libs -c fl_lint.ml
- ocamlopt -I +compiler-libs -a -o findlib.cmxa findlib_config.cmx fl_split.cmx fl_metatoken.cmx fl_meta.cmx fl_metascanner.cmx fl_topo.cmx fl_package_base.cmx findlib.cmx fl_args.cmx fl_lint.cmx
- if [ 1 -gt 0 ]; then \
-     ocamlopt -I +compiler-libs -shared -o findlib.cmxs findlib_config.cmx fl_split.cmx fl_metatoken.cmx fl_meta.cmx fl_metascanner.cmx fl_topo.cmx fl_package_base.cmx findlib.cmx fl_args.cmx fl_lint.cmx; \
- fi
- ocamlopt -I +compiler-libs -c ocaml_args.ml
- ocamlopt -I +compiler-libs -c frontend.ml
- File "frontend.ml", line 1787, characters 16-29:
- Warning 3: deprecated: String.create
- Use Bytes.create instead.
- File "frontend.ml", line 2184, characters 25-41:
- Warning 3: deprecated: String.lowercase
- Use String.lowercase_ascii instead.
- File "frontend.ml", line 2189, characters 16-32:
- Warning 3: deprecated: String.lowercase
- Use String.lowercase_ascii instead.
- ocamlopt -I +compiler-libs -o ocamlfind_opt findlib.cmxa unix.cmxa \
- 	   ocaml_args.cmx frontend.cmx
- ocamlopt -I +compiler-libs -c fl_dynload.ml
- ocamlopt -I +compiler-libs -a -o findlib_dynload.cmxa fl_dynload.cmx
- if [ 1 -gt 0 ]; then \
-     ocamlopt -I +compiler-libs -shared -o findlib_dynload.cmxs fl_dynload.cmx; \
- fi
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
[ocamlfind: make install] Command started
+ make "install" (CWD=/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2)
- mkdir -p "/home/opam/.opam/4.03.0+trunk/bin"
- mkdir -p "/home/opam/.opam/4.03.0+trunk/man"
- make install-config
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2'
- mkdir -p "`dirname \"/home/opam/.opam/4.03.0+trunk/lib/findlib.conf\"`"
- test -f "/home/opam/.opam/4.03.0+trunk/lib/findlib.conf" || cp findlib.conf "/home/opam/.opam/4.03.0+trunk/lib/findlib.conf"
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2'
- for p in findlib; do ( cd src/$p; make install ); done
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- mkdir -p "/home/opam/.opam/4.03.0+trunk/lib/findlib"
- mkdir -p "/home/opam/.opam/4.03.0+trunk/bin"
- test 1 -eq 0 || cp topfind "/home/opam/.opam/4.03.0+trunk/lib/ocaml"
- files=`../../tools/collect_files ../../Makefile.config findlib.cmi findlib.mli findlib.cma topfind.cmi topfind.mli fl_package_base.mli fl_package_base.cmi fl_metascanner.mli fl_metascanner.cmi fl_metatoken.cmi findlib_top.cma findlib.cmxa findlib.a findlib.cmxs findlib_dynload.cma findlib_dynload.cmxa findlib_dynload.a findlib_dynload.cmxs fl_dynload.mli fl_dynload.cmi META` && \
- cp $files "/home/opam/.opam/4.03.0+trunk/lib/findlib"
- f="ocamlfind"; { test -f ocamlfind_opt && f="ocamlfind_opt"; }; \
- cp $f "/home/opam/.opam/4.03.0+trunk/bin/ocamlfind"
- # the following "if" block is only needed for 4.00beta2
- if [ 1 -eq 0 -a -f "/home/opam/.opam/4.03.0+trunk/lib/ocaml/compiler-libs/topdirs.cmi" ]; then \
-     cd "/home/opam/.opam/4.03.0+trunk/lib/ocaml/compiler-libs/"; \
-     cp topdirs.cmi toploop.cmi "/home/opam/.opam/4.03.0+trunk/lib/findlib/"; \
- fi
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- make install-meta
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2'
- for x in `ls site-lib-src`; do if [ -f "site-lib-src/$x/META" ]; then mkdir -p "/home/opam/.opam/4.03.0+trunk/lib/$x"; cp site-lib-src/$x/META "/home/opam/.opam/4.03.0+trunk/lib/$x"; fi; done
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2'
- cd src/findlib; make install-num-top
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- mkdir -p "/home/opam/.opam/4.03.0+trunk/lib/num-top"
- cp num_top.cma num_top.cmi num_top_printers.cmi \
- 	"/home/opam/.opam/4.03.0+trunk/lib/num-top"
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2/src/findlib'
- if [ 1 -eq 1 ]; then \
- 	cp tools/safe_camlp4 "/home/opam/.opam/4.03.0+trunk/bin"; \
- fi
- make install-doc
- make[1]: Entering directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2'
- mkdir -p "/home/opam/.opam/4.03.0+trunk/man/man1" "/home/opam/.opam/4.03.0+trunk/man/man3 /home/opam/.opam/4.03.0+trunk/man/man5"
- cp doc/ref-man/ocamlfind.1 "/home/opam/.opam/4.03.0+trunk/man/man1"
- cp doc/ref-man/META.5 doc/ref-man/site-lib.5 doc/ref-man/findlib.conf.5 "/home/opam/.opam/4.03.0+trunk/man/man5"
- make[1]: Leaving directory `/home/opam/.opam/4.03.0+trunk/build/ocamlfind.1.6.2'
-> installed ocamlfind.1.6.2
[camlzip: make all] Command started
+ make "all" (CWD=/home/opam/.opam/4.03.0+trunk/build/camlzip.1.05)
- ocamlc -g -c -ccopt -g -ccopt -I/usr/local/include zlibstubs.c
- zlibstubs.c:18:18: fatal error: zlib.h: No such file or directory
-  #include <zlib.h>
-                   ^
- compilation terminated.
- make: *** [zlibstubs.o] Error 2
[91m[ERROR] The compilation of camlzip failed at "make all".
[0m[camlzip: ocamlfind remove] Command started
+ ocamlfind "remove" "zip" (CWD=/home/opam/.opam/4.03.0+trunk/build/camlzip.1.05)
- ocamlfind: [WARNING] No such directory: /home/opam/.opam/4.03.0+trunk/lib/zip
[camlzip: ocamlfind remove] Command started
+ ocamlfind "remove" "camlzip" (CWD=/home/opam/.opam/4.03.0+trunk/build/camlzip.1.05)
[91m
#=== ERROR while installing camlzip.1.05 ======================================#
# opam-version         1.2.2 (2dee5d69c0bd29731e6cb2ee537f0adf72404ba4)
# os                   linux
# command              make all
# path                 /home/opam/.opam/4.03.0+trunk/build/camlzip.1.05
# compiler             4.03.0+trunk
# exit-code            2
# env-file             /home/opam/.opam/4.03.0+trunk/build/camlzip.1.05/camlzip-223-0c525f.env
# stdout-file          /home/opam/.opam/4.03.0+trunk/build/camlzip.1.05/camlzip-223-0c525f.out
# stderr-file          /home/opam/.opam/4.03.0+trunk/build/camlzip.1.05/camlzip-223-0c525f.err
### stdout ###
# ocamlc -g -c -ccopt -g -ccopt -I/usr/local/include zlibstubs.c
### stderr ###
# zlibstubs.c:18:18: fatal error: zlib.h: No such file or directory
#  #include <zlib.h>
#                   ^
# compilation terminated.
# make: *** [zlibstubs.o] Error 2

[0m- ocamlfind: [WARNING] No such directory: /home/opam/.opam/4.03.0+trunk/lib/camlzip


=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
The following actions were aborted
  - install imagelib 20160413
The following actions failed
  - install camlzip 1.05
The following changes have been performed
  - install conf-m4         1    
  - install conf-ncurses    1    
  - install conf-pkg-config 1.0  
  - install ocamlfind       1.6.2

=-=- camlzip.1.05 troobleshooting -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> This package relies on external (system) dependencies that may be missing.
   `opam depext camlzip.1.05' may help you find the correct installation for
   your system.
[91m
The former state can be restored with:
    opam switch import
"~/.opam/4.03.0+trunk/backup/state-20160313103926.export"
'opam install -y -j 2 -v imagelib' failed.
[0mThe command '/bin/sh -c sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" &&   sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/craff/opam-repository.git master && opam update -u" &&   sudo -u opam sh -c "opam depext -u imagelib" &&   sudo -u opam sh -c "opam install -y -j 2 -v imagelib"' returned a non-zero code: 4
