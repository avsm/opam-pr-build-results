Running this Dockerfile:
FROM ocaml/opam:ubuntu-14.04_ocaml-4.02.3
RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" && \
  sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/timbertson/opam-repository.git tk && opam update -u" && \
  sudo -u opam sh -c "opam depext -u labltk" && \
  sudo -u opam sh -c "opam install -y -j 2 -v labltk"Sending build context to Docker daemon 37.38 kB
Step 1 : FROM ocaml/opam:ubuntu-14.04_ocaml-4.02.3
ubuntu-14.04_ocaml-4.02.3: Pulling from ocaml/opam
faecf96fd5ab: Already exists
995977506e98: Already exists
efb63fb8dcb6: Already exists
a3ed95caeb02: Already exists
f9e48f98ed9e: Already exists
64a61352b794: Already exists
34f84fc12cbf: Already exists
Digest: sha256:89b2ce119316fe3e3f063f8789b85f0ba30a03a9ce3035a7a22309b055fbe49a
Status: Image is up to date for ocaml/opam:ubuntu-14.04_ocaml-4.02.3
 ---> d5f5a15340d4
Step 2 : RUN sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" &&   sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/timbertson/opam-repository.git tk && opam update -u" &&   sudo -u opam sh -c "opam depext -u labltk" &&   sudo -u opam sh -c "opam install -y -j 2 -v labltk"
 ---> Running in 19e006a7c043
[91mFrom git://github.com/ocaml/opam-repository
 * branch            master     -> FETCH_HEAD
[0m[91m   6f6eed5..66b0666  master     -> origin/master
[0mUpdating 6f6eed5..66b0666
Fast-forward
 packages/0install/0install.2.6.2/opam              |  1 +
 packages/0install/0install.2.8/opam                |  3 +-
 packages/0install/0install.2.9.1/opam              |  1 +
 packages/cmark/cmark.0.2.0/descr                   |  1 +
 packages/cmark/cmark.0.2.0/opam                    | 19 ++++++++
 packages/cmark/cmark.0.2.0/url                     |  2 +
 packages/conf-wxwidgets/conf-wxwidgets.3.0/descr   |  2 +
 packages/conf-wxwidgets/conf-wxwidgets.3.0/opam    | 11 +++++
 packages/llvm/llvm.3.8/descr                       |  3 ++
 packages/llvm/llvm.3.8/files/install.sh            | 50 ++++++++++++++++++++++
 packages/llvm/llvm.3.8/opam                        | 23 ++++++++++
 packages/llvm/llvm.3.8/url                         |  2 +
 packages/mirage-unix/mirage-unix.2.4.1/descr       |  1 +
 packages/mirage-unix/mirage-unix.2.4.1/opam        | 23 ++++++++++
 packages/mirage-unix/mirage-unix.2.4.1/url         |  2 +
 .../mirage-xen-minios/mirage-xen-minios.0.7.0/opam |  5 ++-
 packages/mirage-xen/mirage-xen.2.4.1/descr         |  3 ++
 packages/mirage-xen/mirage-xen.2.4.1/opam          | 30 +++++++++++++
 packages/mirage-xen/mirage-xen.2.4.1/url           |  2 +
 packages/pcap-format/pcap-format.0.3.1/opam        | 10 +++++
 packages/pcap-format/pcap-format.0.3.2/opam        | 10 +++++
 packages/pcap-format/pcap-format.0.3.3/opam        | 14 +++++-
 packages/ppx_expect/ppx_expect.113.33.01/descr     |  2 +
 packages/ppx_expect/ppx_expect.113.33.01/opam      | 30 +++++++++++++
 packages/ppx_expect/ppx_expect.113.33.01/url       |  2 +
 packages/stog-rdf/stog-rdf.0.10.0/opam             | 12 ++++--
 packages/stog-rdf/stog-rdf.0.11.0/opam             | 12 ++++--
 packages/stog-rdf/stog-rdf.0.15.0/opam             |  2 +-
 packages/stog-rdf/stog-rdf.0.16.0/opam             |  2 +-
 packages/stog-rdf/stog-rdf.0.6/descr               |  1 -
 packages/stog-rdf/stog-rdf.0.6/opam                | 12 ------
 packages/stog-rdf/stog-rdf.0.6/url                 |  2 -
 packages/stog-rdf/stog-rdf.0.8.0/descr             |  1 -
 packages/stog-rdf/stog-rdf.0.8.0/opam              | 12 ------
 packages/stog-rdf/stog-rdf.0.8.0/url               |  2 -
 packages/stog-rdf/stog-rdf.0.9.0/descr             |  1 -
 packages/stog-rdf/stog-rdf.0.9.0/findlib           |  1 -
 packages/stog-rdf/stog-rdf.0.9.0/opam              | 16 -------
 packages/stog-rdf/stog-rdf.0.9.0/url               |  2 -
 .../toplevel_expect_test.113.33.01/descr           |  5 +++
 .../toplevel_expect_test.113.33.01/opam            | 31 ++++++++++++++
 .../toplevel_expect_test.113.33.01/url             |  2 +
 packages/wxOCaml/wxOCaml.1.0.1/opam                |  5 +--
 43 files changed, 308 insertions(+), 65 deletions(-)
 create mode 100644 packages/cmark/cmark.0.2.0/descr
 create mode 100644 packages/cmark/cmark.0.2.0/opam
 create mode 100644 packages/cmark/cmark.0.2.0/url
 create mode 100644 packages/conf-wxwidgets/conf-wxwidgets.3.0/descr
 create mode 100644 packages/conf-wxwidgets/conf-wxwidgets.3.0/opam
 create mode 100644 packages/llvm/llvm.3.8/descr
 create mode 100755 packages/llvm/llvm.3.8/files/install.sh
 create mode 100644 packages/llvm/llvm.3.8/opam
 create mode 100644 packages/llvm/llvm.3.8/url
 create mode 100644 packages/mirage-unix/mirage-unix.2.4.1/descr
 create mode 100644 packages/mirage-unix/mirage-unix.2.4.1/opam
 create mode 100644 packages/mirage-unix/mirage-unix.2.4.1/url
 create mode 100644 packages/mirage-xen/mirage-xen.2.4.1/descr
 create mode 100644 packages/mirage-xen/mirage-xen.2.4.1/opam
 create mode 100644 packages/mirage-xen/mirage-xen.2.4.1/url
 create mode 100644 packages/ppx_expect/ppx_expect.113.33.01/descr
 create mode 100644 packages/ppx_expect/ppx_expect.113.33.01/opam
 create mode 100644 packages/ppx_expect/ppx_expect.113.33.01/url
 delete mode 100644 packages/stog-rdf/stog-rdf.0.6/descr
 delete mode 100644 packages/stog-rdf/stog-rdf.0.6/opam
 delete mode 100644 packages/stog-rdf/stog-rdf.0.6/url
 delete mode 100644 packages/stog-rdf/stog-rdf.0.8.0/descr
 delete mode 100644 packages/stog-rdf/stog-rdf.0.8.0/opam
 delete mode 100644 packages/stog-rdf/stog-rdf.0.8.0/url
 delete mode 100644 packages/stog-rdf/stog-rdf.0.9.0/descr
 delete mode 100644 packages/stog-rdf/stog-rdf.0.9.0/findlib
 delete mode 100644 packages/stog-rdf/stog-rdf.0.9.0/opam
 delete mode 100644 packages/stog-rdf/stog-rdf.0.9.0/url
 create mode 100644 packages/toplevel_expect_test/toplevel_expect_test.113.33.01/descr
 create mode 100644 packages/toplevel_expect_test/toplevel_expect_test.113.33.01/opam
 create mode 100644 packages/toplevel_expect_test/toplevel_expect_test.113.33.01/url

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized

Everything as up-to-date as possible (run with --verbose to show unavailable
upgrades).
[91mFrom https://github.com/timbertson/opam-repository
 * branch            tk         -> FETCH_HEAD
[0mMerge made by the 'recursive' strategy.
 packages/conf-tcl/conf-tcl.1/descr  |  2 ++
 packages/conf-tcl/conf-tcl.1/opam   | 11 +++++++++++
 packages/conf-tk/conf-tk.1/descr    |  2 ++
 packages/conf-tk/conf-tk.1/opam     | 10 ++++++++++
 packages/conf-zlib/conf-zlib.1/opam |  1 +
 packages/ivy/ivy.1.2.2/opam         |  4 +---
 packages/ivy/ivy.1.3.1/opam         |  9 ++++++---
 packages/labltk/labltk.8.06.0/opam  |  6 +-----
 8 files changed, 34 insertions(+), 11 deletions(-)
 create mode 100644 packages/conf-tcl/conf-tcl.1/descr
 create mode 100644 packages/conf-tcl/conf-tcl.1/opam
 create mode 100644 packages/conf-tk/conf-tk.1/descr
 create mode 100644 packages/conf-tk/conf-tk.1/opam

=-=- Updating package repositories =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default: local] Command started
[default: local] Command started
[default: local] Command started
[default] /home/opam/opam-repository synchronized

Everything as up-to-date as possible (run with --verbose to show unavailable
upgrades).
# Detecting depexts using flags: x86_64 linux ubuntu
# The following system packages are needed:
#  - m4
#  - ncurses-dev
#  - pkg-config
#  - tcl-dev
#  - tk-dev
# The following new OS packages need to be installed: ncurses-dev tcl-dev tk-dev
Not running as root, the following command will be run through "sudo":
    apt-get update
Ign http://archive.ubuntu.com trusty InRelease
Get:1 http://archive.ubuntu.com trusty-updates InRelease [65.9 kB]
Get:2 http://archive.ubuntu.com trusty-security InRelease [65.9 kB]
Hit http://archive.ubuntu.com trusty Release.gpg
Hit http://archive.ubuntu.com trusty Release
Get:3 http://archive.ubuntu.com trusty-updates/main Sources [331 kB]
Get:4 http://archive.ubuntu.com trusty-updates/restricted Sources [5217 B]
Get:5 http://archive.ubuntu.com trusty-updates/universe Sources [190 kB]
Get:6 http://archive.ubuntu.com trusty-updates/main amd64 Packages [918 kB]
Get:7 http://archive.ubuntu.com trusty-updates/restricted amd64 Packages [23.5 kB]
Get:8 http://archive.ubuntu.com trusty-updates/universe amd64 Packages [440 kB]
Get:9 http://archive.ubuntu.com trusty-security/main Sources [138 kB]
Get:10 http://archive.ubuntu.com trusty-security/restricted Sources [3920 B]
Get:11 http://archive.ubuntu.com trusty-security/universe Sources [39.2 kB]
Get:12 http://archive.ubuntu.com trusty-security/main amd64 Packages [555 kB]
Get:13 http://archive.ubuntu.com trusty-security/restricted amd64 Packages [20.2 kB]
Get:14 http://archive.ubuntu.com trusty-security/universe amd64 Packages [163 kB]
Hit http://archive.ubuntu.com trusty/main Sources
Hit http://archive.ubuntu.com trusty/restricted Sources
Hit http://archive.ubuntu.com trusty/universe Sources
Hit http://archive.ubuntu.com trusty/main amd64 Packages
Hit http://archive.ubuntu.com trusty/restricted amd64 Packages
Hit http://archive.ubuntu.com trusty/universe amd64 Packages
Fetched 2958 kB in 4s (599 kB/s)
Reading package lists...
# OS package update successful
Not running as root, the following command will be run through "sudo":
    apt-get install -qq -yy ncurses-dev tcl-dev tk-dev
[91mdebconf: unable to initialize frontend: Dialog
debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
debconf: falling back to frontend: Readline
[0m[91mdebconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
[0m[91mdpkg-preconfigure: unable to re-open stdin: 
[0mSelecting previously unselected package libelf1:amd64.
[91mdpkg: unrecoverable fatal error, aborting:
 reading files list for package 'libc6:amd64': Input/output error
[0m(Reading database ... [91mE: Sub-process /usr/bin/dpkg returned an error code (2)
[0m[91mopam-depext: internal error, uncaught exception:
             Failure("OS package installation failed")
             
[0mThe command '/bin/sh -c sudo -u opam sh -c "cd /home/opam/opam-repository && git pull origin master && opam update -u" &&   sudo -u opam sh -c "cd /home/opam/opam-repository && git pull https://github.com/timbertson/opam-repository.git tk && opam update -u" &&   sudo -u opam sh -c "opam depext -u labltk" &&   sudo -u opam sh -c "opam install -y -j 2 -v labltk"' returned a non-zero code: 1
